<!doctype html>
<html lang="en-us">
  <head>
    <title>Configuration Manager Feature Update Loop // DaltonFarm0</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Chris Dalton" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css" />
    

    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Configuration Manager Feature Update Loop">
  <meta name="twitter:description" content="Fix SCCM Feature Update Loop: Troubleshooting Guide To understand this problem, remember that SCCM is only attempting to launch the setup file for the feature update. The feature update is failing, and SCCM continues to try to run the setup. As part of the setup process the PC must reboot—hence the loop after the setup failure.
Reviewing Windows Setup Logs First, enable Show hidden items in File Explorer, then browse to:">

    <meta property="og:url" content="https://ckdalton01.github.io/blog/sccmfeatureupdateloop/">
  <meta property="og:site_name" content="DaltonFarm0">
  <meta property="og:title" content="Configuration Manager Feature Update Loop">
  <meta property="og:description" content="Fix SCCM Feature Update Loop: Troubleshooting Guide To understand this problem, remember that SCCM is only attempting to launch the setup file for the feature update. The feature update is failing, and SCCM continues to try to run the setup. As part of the setup process the PC must reboot—hence the loop after the setup failure.
Reviewing Windows Setup Logs First, enable Show hidden items in File Explorer, then browse to:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2022-06-26T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-06-26T00:00:00+00:00">
    <meta property="article:tag" content="ConfigMgr">
    <meta property="article:tag" content="Windows">
    <meta property="article:tag" content="Troubleshooting">


  </head>
  <body>
    <header class="app-header">
      <a href="/"><img class="app-header-avatar" src="/avatar.jpg" alt="Chris Dalton" /></a>
      <span class="app-header-title">DaltonFarm0</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             -- 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             -- 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>Professional Log Reader, amature at everything else.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/ckdalton01" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-github" viewBox="0 0 24 24" fill="currentColor"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
          </a>
        
          <a href="https://www.linkedin.com/in/christopher-dalton-552a2955" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-linkedin" viewBox="0 0 24 24" fill="currentColor"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Configuration Manager Feature Update Loop</h1>
      <div class="post-meta">
        <div>
          <svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Jun 26, 2022
        </div>
        <div>
          <svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          2 min read
        </div>
        <div>
          <svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
              <a class="tag" href="/tags/configmgr/">ConfigMgr</a>
              <a class="tag" href="/tags/windows/">Windows</a>
              <a class="tag" href="/tags/troubleshooting/">Troubleshooting</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="fix-sccm-feature-update-loop-troubleshooting-guide">Fix SCCM Feature Update Loop: Troubleshooting Guide</h1>
<p>To understand this problem, remember that SCCM is only attempting to launch the setup file for the feature update. The feature update is failing, and SCCM continues to try to run the setup. As part of the setup process the PC must reboot—hence the loop after the setup failure.</p>
<h2 id="reviewing-windows-setup-logs">Reviewing Windows Setup Logs</h2>
<p>First, enable <strong>Show hidden items</strong> in File Explorer, then browse to:</p>
<pre tabindex="0"><code>C:\$WINDOWS.~BT\Sources\Panther
</code></pre><p><img src="/image1.png" alt="image"></p>
<p>Here you will find the setup error logs. You can read through the logs to determine what the problem is.</p>
<p>Typically, you can start searching online for the <strong>0x800xxxxx</strong> error codes to uncover the cause.</p>
<h2 id="checking-compatdata-files">Checking CompatData Files</h2>
<p>In this case, the setup logs indicated a driver failure. Next, review the <strong>CompatData</strong> files.</p>
<p>Open the latest CompatData file by date (likely the one the setup failed on). Open it in Notepad:</p>
<p><img src="/image-1.png" alt="image"></p>
<p>As shown above, <strong>oem162.inf</strong> and <strong>oem161.inf</strong> blocked the migration to the new feature update.</p>
<blockquote>
<p><strong>Tip:</strong><br>
If the CompatData files do not list any drivers blocking the migration, then the issue is likely caused by something else. Still, review the setup logs thoroughly.</p>
</blockquote>
<p><img src="/image-2.png" alt="image"></p>
<p>These two INF files are located at:</p>
<pre tabindex="0"><code>C:\Windows\INF
</code></pre><p>They correspond to:</p>
<ul>
<li><strong>Microsoft Print to PDF</strong></li>
<li><strong>Microsoft XPS Document Writer</strong></li>
</ul>
<p><img src="/image-3.png" alt="image"></p>
<p>To proceed with the upgrade, these features must be turned <strong>off</strong>:</p>
<p><img src="/image-41.png" alt="image"></p>
<p>Click <strong>OK</strong>.</p>
<p>Then <strong>reboot the PC</strong> to clear the SCCM restart prompt.</p>
<h2 id="resetting-update-components">Resetting Update Components</h2>
<p>Once the PC boots up again, open an <strong>elevated Command Prompt</strong> and run the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cmd" data-lang="cmd"><span style="display:flex;"><span>net stop wuauserv
</span></span><span style="display:flex;"><span>net stop bits
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">rename</span> c:\windows\SoftwareDistribution SoftwareDistribution.bak
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">rename</span> c:\$WINDOWS.~BT c:\$WINDOWS.~BT.old
</span></span><span style="display:flex;"><span>net start wuauserv
</span></span><span style="display:flex;"><span>net start bits
</span></span></code></pre></div><p>This resets the installation through SCCM. You can now attempt to install the feature update again. SCCM will re-download and re-install the update, and the upgrade should complete successfully.</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
