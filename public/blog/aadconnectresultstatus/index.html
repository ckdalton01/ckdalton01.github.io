<!doctype html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>AADConnectResultStatus // DaltonFarm0</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Chris Dalton" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css" />
    

    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="AADConnectResultStatus">
  <meta name="twitter:description" content="While running Microsoft Entra Connect Sync, I encountered a persistent configuration error that refused to clear:
“Retrying this operation may help resolve the issue.”
(Spoiler: it won’t.)
Everything looked correct during setup, but the sync would not complete. The issue turned out to be related to the synchronization service account Entra Connect tries to create.
Reviewing the Logs The wizard errors lacked detail, but the logs provided the necessary clue:">

    <meta property="og:url" content="http://localhost:1313/blog/aadconnectresultstatus/">
  <meta property="og:site_name" content="DaltonFarm0">
  <meta property="og:title" content="AADConnectResultStatus">
  <meta property="og:description" content="While running Microsoft Entra Connect Sync, I encountered a persistent configuration error that refused to clear:
“Retrying this operation may help resolve the issue.”
(Spoiler: it won’t.)
Everything looked correct during setup, but the sync would not complete. The issue turned out to be related to the synchronization service account Entra Connect tries to create.
Reviewing the Logs The wizard errors lacked detail, but the logs provided the necessary clue:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2024-12-22T21:01:30-07:00">
    <meta property="article:modified_time" content="2024-12-22T21:01:30-07:00">
    <meta property="article:tag" content="Azure">
    <meta property="article:tag" content="Windows">


  </head>
  <body>
    <header class="app-header">
      <a href="/"><img class="app-header-avatar" src="/avatar.jpg" alt="Chris Dalton" /></a>
      <span class="app-header-title">DaltonFarm0</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             -- 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             -- 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>Professional Log Reader, amature at everything else.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/ckdalton01" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-github" viewBox="0 0 24 24" fill="currentColor"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
          </a>
        
          <a href="https://www.linkedin.com/in/christopher-dalton-552a2955" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-brand-linkedin" viewBox="0 0 24 24" fill="currentColor"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">AADConnectResultStatus</h1>
      <div class="post-meta">
        <div>
          <svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Dec 22, 2024
        </div>
        <div>
          <svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          2 min read
        </div>
        <div>
          <svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
              <a class="tag" href="/tags/azure/">Azure</a>
              <a class="tag" href="/tags/windows/">Windows</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>While running <strong>Microsoft Entra Connect Sync</strong>, I encountered a persistent configuration error that refused to clear:</p>
<blockquote>
<p>“Retrying this operation may help resolve the issue.”<br>
<em>(Spoiler: it won’t.)</em></p>
</blockquote>
<p><img src="/image-7.png" alt="image-7"></p>
<p>Everything looked correct during setup, but the sync would not complete. The issue turned out to be related to the <strong>synchronization service account</strong> Entra Connect tries to create.</p>
<hr>
<h2 id="reviewing-the-logs">Reviewing the Logs</h2>
<p>The wizard errors lacked detail, but the logs provided the necessary clue:</p>
<pre><code>[18:33:58.905] [ 12] [ERROR] ExecuteADSyncConfiguration: configuration failed.
Skipping export of synchronization policy. resultStatus=Failed

[18:33:58.972] [ 12] [ERROR] PerformConfigurationPageViewModel:
Unable to create the synchronization service account for Microsoft Entra ID.
Retrying this operation may help resolve the issue.
</code></pre>
<p>The logs continued to repeat the error with no useful remediation guidance.</p>
<p><img src="/image-8.png" alt="image-8"></p>
<p>But this line stood out:</p>
<pre><code>[18:32:57.115] [ 12] [WARN ] GetServiceAccount: service account authorization failed
for Sync_DC1_72476b2272e5@*****.onmicrosoft.com. Waiting for account to be provisioned.
Details: AADSTS50079: Due to a configuration change made by your administrator,
or because you moved to a new location, you must enroll in multi-factor authentication
to access ‘00000002-0000-0000-c000-000000000000’.
</code></pre>
<p><img src="/image-10.png" alt="image-10"></p>
<p>This was the key to the solution.</p>
<hr>
<h2 id="the-root-cause-conditional-access-requiring-mfa">The Root Cause: Conditional Access Requiring MFA</h2>
<p>The Entra Connect setup process creates a <strong>service account</strong> used for synchronization.<br>
However, in this environment, a Conditional Access policy was in place:</p>
<ul>
<li><strong>All Users</strong> → MFA requirement</li>
<li>A small set of accounts was excluded</li>
</ul>
<p>The newly created sync account was <strong>not</strong> excluded.<br>
Because it was blocked by MFA, Entra Connect could not authenticate it, which caused the configuration to fail.</p>
<p><img src="/image-12.png" alt="image-12"></p>
<p>This explains the repeated AADSTS50079 error referencing MFA enrollment.</p>
<hr>
<h2 id="resolution">Resolution</h2>
<ol>
<li>Open <strong>Entra ID</strong></li>
<li>Go to <strong>Conditional Access</strong> → <strong>Policies</strong></li>
<li>Locate the MFA enforcement policy</li>
<li>In <em>Exclude</em>, add the sync service account shown in the logs</li>
<li>Return to the Entra Connect wizard and click <strong>Retry</strong></li>
</ol>
<p>After excluding the account, the installation completed immediately without further issues.</p>
<hr>
<h2 id="why">Why?</h2>
<p>Organizations increasingly enforce MFA globally, which is good security practice. However, <strong>system-generated service accounts</strong>—especially those created during setup processes—may inadvertently fall under Conditional Access policies before they are fully provisioned.</p>
<p>If you encounter issues such as:</p>
<ul>
<li>Entra Connect failing to provision the sync account</li>
<li>AADSTS50079 errors</li>
<li>“Retrying this operation may help resolve the issue” loops</li>
</ul>
<p>…you should always verify whether Conditional Access is blocking the process.</p>
<hr>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>Hybrid identity setups rely on this sync account to function properly. Ensuring that Conditional Access does not interfere with its creation is critical for:</p>
<ul>
<li>Entra Connect deployments</li>
<li>Co-management onboarding</li>
<li>Cloud Attach configurations</li>
<li>General directory synchronization health</li>
</ul>
<p>A small exclusion can prevent hours of troubleshooting.</p>
<p><img src="/image-13.png" alt="image-13"></p>
<p>Cheers.</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
